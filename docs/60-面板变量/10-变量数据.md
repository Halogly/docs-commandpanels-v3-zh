# 变量数据

面板变量是自定义占位符或从一个面板传递到另一个面板的数据。这些变量能够跨面板传递数据，或永久储存供插件在下次打开面板时使用。

## 创建占位符变量

要定义占位符及其值，使用以下命令。需要指定要打开的面板名称，然后按格式添加`[占位符:值]`。占位符值可包含空格，占位符名称本身不应使用大写字母。

```yaml
0:
  material: STONE
  commands:
    - "open= panel-3 [man:kebi] [mat:STONE]"
    - "msg= 该占位符的值为%cp-man%"
```

定义占位符后，即可在目标面板中任意位置使用。

上例中占位符为`man`，使用时对应`%cp-man%`。

## 编辑占位符变量

如需在当前面板编辑占位符，不能使用`open=`。应将`open=`替换为`placeholder=`并使用相同的格式，从而在当前面板内修改占位符。

指定需要编辑的占位符，未提及的其他占位符数据不会改变。例如，若`panel-3`已打开且需要将`%cp-mat%`改为`BEACON`：

```yaml
7:
  material: BEACON
  commands:
    - "placeholder= [mat:BEACON]"
```

## 创建数据变量

上述的占位符变量是临时变量，而数据变量则是永久变量。数据变量的值会永久保存在文件中，即使服务器重启也不会丢失。需要使用以下命令标签来设置值。

```yaml
add-data= [数据名称] [值] [可选玩家名称]
set-data= [数据名称] [值] [可选玩家名称]
del-data= [数据名称] [可选玩家名称]
clear-data= [玩家名称]
math-data= [数据名称] [运算操作] [可选玩家名称]
```

| 命令                                  | 描述                                                                                |
|:------------------------------------|:----------------------------------------------------------------------------------|
| `add-data= [数据名称] [值] [可选玩家名称]`     | 不会覆盖现有数据，仅当该玩家数据的值为空时才会写入。适用于面板的`commands-on-open`中，确保数据完成设置后再使用面板。               |
| `set-data= [数据名称] [值] [可选玩家名称]`     | 强制设置新值，即使数据已有值也会覆盖。                                                               |
| `del-data= [数据名称] [可选玩家名称]`         | 永久删除玩家的特定数据值。删除后可使用`add-data`重新设置。                                                |
| `clear-data= [玩家名称]`                | 清空玩家所有已保存的数据。可使用`%cp-player-name%`指定当前打开面板的玩家。                                    |
| `math-data= [数据名称] [运算操作] [可选玩家名称]` | 对数据进行数值运算。支持四种运算符：`+`、`-`、`*`、`/`。运算格式示例：`+1`、`+0.1`、`-15`、`*3`、`/5`。将对当前存储值执行运算。 |

## 查看数据变量

要查看数据变量，只需使用以下占位符：

```java
%cp-data-[数据名称]%
%cp-data-[数据名称],[玩家名称]%
```

## 通过占位符设置数据变量

数据也可通过占位符进行修改：

```java
%cp-setdata-[数据名称],[新值]%
```